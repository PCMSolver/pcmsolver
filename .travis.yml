language: cpp
git:
        submodules: false
branches:
        only:
                - release
before_install:
        - sudo apt-get -qq update
        - sudo apt-get install gfortran gfortran-multilib 
        - sudo pip install cpp-coveralls
install: true
before_script:
        - export FC=gfortran
        - export BOOST_ROOT=${PWD}/PCMSolver/pcmsolver/build/external/boost
matrix:
        include:
                - script:                                                                 
                          - ./setup --cxx=g++ --cc=gcc --fc=gfortran --type=debug --tests --coverage
                          - cd build
                          - make
                          - make test
                - script:                                                                 
                          - ./setup --cxx=clang++ --cc=clang --fc=gfortran --type=debug --tests --coverage
                          - cd build
                          - make
                          - make test
after_success:
        - coveralls --root .. -E ".*external.*" -E ".*CMakeFiles.*" -E ".*generated.*" -E ".*tests*" -E ".*tools.*"
notifications:
        recipients:
                - roberto.d.remigio@uit.no
                - luca.frediani@uit.no
        email:
                on_success: change
                on_failure: always
